{"ast":null,"code":"import _defineProperty from \"/Users/AlejandroAguilar/Development/sandbox/Acclimated_frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/AlejandroAguilar/Development/sandbox/Acclimated_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/AlejandroAguilar/Development/sandbox/Acclimated_frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/AlejandroAguilar/Development/sandbox/Acclimated_frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/AlejandroAguilar/Development/sandbox/Acclimated_frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/AlejandroAguilar/Development/sandbox/Acclimated_frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/AlejandroAguilar/Development/sandbox/Acclimated_frontend/src/components/LogIn.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { withRouter } from 'react-router';\n\nvar LogInForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LogInForm, _Component);\n\n  function LogInForm(props) {\n    var _this;\n\n    _classCallCheck(this, LogInForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LogInForm).call(this, props));\n\n    _this.handleChanges = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.logIn = function (e) {\n      e.preventDefault();\n      fetch(\"http://localhost:3000/login\", {\n        method: \"POST\",\n        body: JSON.stringify(_this.state),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (data) {\n        if (!data.message) {\n          localStorage.token = data.token;\n\n          _this.props.currentUser(data.user);\n        } else {\n          alert(data.message);\n        }\n      });\n    };\n\n    _this.state = {\n      email: \"\",\n      password: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(LogInForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.token;\n      fetch(\"http://localhost:3000/account\", {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (data) {\n        if (!data.message) {\n          _this2.props.currentUser(data);\n\n          _this2.props.history.push('/home');\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(this.state);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.logIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        placeholder: \"email\",\n        onChange: function onChange(e) {\n          return _this3.handleChanges(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"password\",\n        onChange: function onChange(e) {\n          return _this3.handleChanges(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      })), React.createElement(Link, {\n        to: \"/signUp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Sign Up\")));\n    }\n  }]);\n\n  return LogInForm;\n}(Component);\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    currentUser: function currentUser(user) {\n      return dispatch({\n        type: \"SET_USER\",\n        payload: user\n      });\n    }\n  };\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(LogInForm));","map":{"version":3,"sources":["/Users/AlejandroAguilar/Development/sandbox/Acclimated_frontend/src/components/LogIn.js"],"names":["React","Component","connect","Link","withRouter","LogInForm","props","handleChanges","e","setState","target","name","value","logIn","preventDefault","fetch","method","body","JSON","stringify","state","headers","then","resp","json","data","message","localStorage","token","currentUser","user","alert","email","password","Authorization","history","push","console","log","mapDispatchToProps","dispatch","type","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {connect} from 'react-redux'\nimport {Link} from 'react-router-dom';\nimport { withRouter } from 'react-router';\n\n\n\nclass LogInForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.token;\n    fetch(\"http://localhost:3000/account\", {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    })\n      .then(resp => resp.json())\n      .then(data => {\n        if (!data.message) {\n          this.props.currentUser(data)\n          this.props.history.push('/home')\n        }\n      });\n  }\n\n  handleChanges = (e) =>{\n    this.setState({\n      [e.target.name]: e.target.value\n    })\n  }\n\n  logIn = e => {\n   e.preventDefault();\n\n   fetch(\"http://localhost:3000/login\", {\n     method: \"POST\",\n     body: JSON.stringify(this.state),\n     headers: {\n       \"Content-Type\": \"application/json\"\n     }\n   })\n     .then(resp => resp.json())\n     .then(data => {\n       if (!data.message) {\n         localStorage.token = data.token;\n         this.props.currentUser(data.user)\n       } else {\n         alert(data.message)\n       }\n     });\n };\n\n  render() {\n    console.log(this.state);\n    return (\n      <div>\n        <form onSubmit={this.logIn}>\n          <input type=\"text\" name=\"email\" placeholder=\"email\" onChange={e=>this.handleChanges(e)}/>\n          <input type=\"password\" name=\"password\" placeholder=\"password\" onChange={e=>this.handleChanges(e)}/>\n          <input type=\"submit\"/>\n        </form>\n        <Link to=\"/signUp\">\n          <button>Sign Up</button>\n        </Link>\n      </div>\n    );\n  }\n}\n\nfunction mapDispatchToProps(dispatch){\n  return {\n    currentUser: (user) => dispatch({type: \"SET_USER\", payload:user}),\n\n  }\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(LogInForm))\n"]},"metadata":{},"sourceType":"module"}